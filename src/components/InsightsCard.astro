---
import { site, sections } from '@/data/site';

// Expand to full width if whatPeopleSay is hidden
const colSpan = sections.whatPeopleSay ? 'lg:col-span-2' : 'lg:col-span-full';
const hasFewitems = site.featuredInsights.length <= 2;

const typeColors: Record<string, string> = {
  'Publication': 'bg-purple-500/10 text-purple-400 border-purple-500/20',
  'Article': 'bg-accent/10 text-accent border-accent/20',
  'Insight': 'bg-cyan-500/10 text-cyan-400 border-cyan-500/20',
};
---

<div class={`glass-card p-6 md:p-8 col-span-full ${colSpan} flex flex-col gap-5`}>
  <h3 class="text-text-muted text-xs font-semibold uppercase tracking-wider">Thought Leadership</h3>

  <div class={`flex flex-col gap-3 ${hasFewitems ? 'justify-center flex-grow' : ''}`}>
    {site.featuredInsights.map((insight) => (
      <a
        href={insight.url}
        target="_blank"
        rel="noopener noreferrer"
        class="group flex flex-col gap-2 p-4 rounded-xl bg-surface-card/50 border border-border-glass hover:border-accent/30 transition-all"
      >
        <div class="flex items-start justify-between gap-3">
          <h4 class="text-text-primary font-medium group-hover:text-accent transition-colors">
            {insight.title}
          </h4>
          <span class={`text-xs px-2 py-0.5 rounded-full border shrink-0 ${typeColors[insight.type] || typeColors['Article']}`}>
            {insight.type}
          </span>
        </div>
        <p class="text-text-secondary text-sm leading-relaxed">{insight.description}</p>
      </a>
    ))}
  </div>
</div>
